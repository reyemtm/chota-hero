<div class="landing-page-wrapper">
  <nav class="p1">
    <a href="/">getBounds</a>
    <div class="nav-links float-right">
      <a href="#about">About</a>

      <a href="#portfolio">Portfolio</a>

      <a href="#writings-talks">Writings & Talks</a>

      <a href="#code">Code</a>

      <a href="#contact">Contact</a>
    </div>
  </nav>
  <header class="hero">
    <img></img>
    <h1 class="clear fw5 m0" style="letter-spacing: 0.5rem;font-size:2.8rem;">Malcolm Meyer</h1>
    <h2 class="clear fw3 m0">Data | GIS | Maps | Web</h2>
    <a href="#contact">Contact</a>
  </header>
  <main>

    <section id="about" class="services">
      <h2 class="fw6">About</h2>
      <div>

        <p>
          <strong>getBounds</strong> is a portfolio and blog created by Malcolm Meyer. I have a passion for ecology, open source, urban planning, and web mapping. I create projects using a variety of desktop and web tools including Leaflet JS, Mapbox GL JS, Postgres/PostGIS and QGIS.
        </p>
        <!-- <h3>Analysis</h3> -->
        <!-- <p>From data cleaning to geocoding to advanced geospatial analysis, I strive to find the most appropriate and cost effective data analysis solutions to fulfill project requirements.</p>
        <h3>Print & Web </h3>
        <p>I have five years of experience building responsive web applications built with Mapbox GL J and two years of experience creating print layouts in QGIS. I have received awards from both state and national organizations for several of these map products.</p>
        <h3>Web Applications</h3>
        <p>I have experience building full stack, responsive web applications using a variety of tools including NodeJS, Postgres, and Firebase. Let me help your organization bring desktop-based workflows to life with the power of the modern web.</p> -->

      </div>
    </section>


    <section id="portfolio" class="full inverse">
      <h2 class="fw6">Portfolio</h2>
      <div>

        <div class="portfolio">
          <img src="/assets/img/16x9_storelocate.jpg">
          <img src="/assets/img/16x9_08-ohio-vehicle-crash-explorer-with-heatmap.png">
          <img src="/assets/img/16x9_04-zanesville-zoning-interactive-web-map.png">
          <img src="/assets/img/16x9_01-ohio-block-group-explorer-explorer-story-with-3d-views.png">
          <img src="/assets/img/16x9_04-zanesville-zoning-interactive-web-map.png">
          <img src="/assets/img/16x9_01-ohio-block-group-explorer-explorer-story-with-3d-views.png">
        </div>

      </div>
    </section>

    <section id="writings-talks">
      <h2 class="fw6">Writings & Talks</h2>
      <div class="blog">
        <% site.posts.sort('date', -1).each(function(post, i) {%>
          <% if (i < 4) {%>
          <a rel="prefetch" href="<%- url_for(post.path) %>">
            <article class="">
              <img src="/assets/img/4x3_<% if (post.img) {%><%- post.img %><%}else{%><%- config.defaultimage %><%}%>" loading=lazy />
              <div>
                <h3> <%= post.title %></h4>
                <h5> <%= post.subtitle %></h5>
                <p><%= (post.excerpt).substring(0, 100) %>...</p>
              </div>
            </article>
          </a>
          <%}%>
        <%})%>
        <a href="/blog" style="text-decoration: underline;text-align: center;">View Blog Archive</a>
      </div>
    </section>

    <section id="code" class='inverse'>
      <h2 class="fw6">Code</h2>
      <div>
        <% for (var i in site.data.repos) { %>
          <% if (site.data.repos[i].stars > 3) {%>
          <article style="padding:1rem;background: #212121;border-radius:3px;margin-bottom: 2rem;">
            <header>
              <a href="<%= site.data.repos[i].repo%>" style="color:white;"><strong><%= site.data.repos[i].name %></strong></a>
            </header>
            <main style="opacity: 0.8;margin: 1rem 0;">
              <%= site.data.repos[i].description %>
              <% if (site.data.repos[i].homepage) {%>
                <div><br /><a href="<%= site.data.repos[i].homepage %>" style="color:#049DBF;">Demo</a></div>
              <%}%>
              </main>
            <footer style="opacity:0.5;">
              <%= site.data.repos[i].language %><% if (site.data.repos[i].forks) {%> <span style="float:right;display:flex;"><img src="https://icongr.am/fontawesome/code-fork.svg?size=20&color=eeeeee">&nbsp;<%= site.data.repos[i].forks %></span><%}%><% if (site.data.repos[i].stars) {%> <span style="float:right;display:flex;"><img src="https://icongr.am/fontawesome/star.svg?size=20&color=eeeeee">&nbsp;<%= site.data.repos[i].stars %>&nbsp;&nbsp;</span><%}%>
            </footer>
          </article>
          <%}%>
        <% } %>
        <a href="/code" style="text-decoration: underline;">View All Code Projects</a>
      </div>
    </section>

    <section id="contact">
      <h2 class="fw6">Contact</h2>
      <div>

        <form>
          <label for="name">Name</label>
          <input type="text" name="name" placeholder="Jane Smith">
          <label for="email">Email</label>
          <input type="email" name="email" placeholder="email@email.com">
          <label for="message">What can I help you with?</label>

          <textarea name="message" placeholder="Message" rows="6"></textarea>
          <button type="submit">Submit</button>
        </form>

      </div>
    </section>
  </main>
  <div class="modal">
    <div class="modal-content">
      <picture>
        <img src="">
        <picture>
          <figcaption></figcaption>
    </div>
  </div>
  <footer class="footer p1 center">
    &copy 2020 <%= config.author %> | <a href="/" class="clear"><%= config.title%></a>
  </footer>
</div>

<script>
var about = {
  title: "About",
  html: [`
   <p>Legacy GIS workflows keep data hidden away on internal networks and proprietary formats. Using a variety of open source software and tooling from Postgres/PostGIS to JavaScript mapping libraries, data once reserved for the engineer's office can now be brought onto the desktop and browser of every stakeholder. <strong>getBounds</strong> specializes in helping organizations implement these systems.  as well as producing print and interactive maps and data visualization products which bring the stories behind the data to life for everyone.
   </p>
  `]
 }
var sections = [

 {
  name: "Portfolio",
  title: "Portfolio",
  class: "full",
  html: [`
   <div class="portfolio" style="cursor: pointer;">
    <img src="/assets/img/16x9_storelocate.jpg">
    <img src="/assets/img/16x9_08-ohio-vehicle-crash-explorer-with-heatmap.png">
    <img src="/assets/img/16x9_04-zanesville-zoning-interactive-web-map.png">
    <img src="/assets/img/16x9_01-ohio-block-group-explorer-explorer-story-with-3d-views.png">
  </div>
 `]
 },
 {
  title: "About",
  class: "services bg-light",
  html: [`
    <h3>Analysis</h3>
    <p>From data cleaning to geocoding to advanced geospatial analysis, I will work with your organization to find the most appropriate and cost effective data analysis solutions to fulfill your application needs.</p>
    <h3>Print & Web Maps</h3>
    <p>I focus primarily on responsive web applications built with Mapbox GL JS and print map layouts with QGIS. I can also assist your organization in bringing data out from internal netwok shares and onto the web using both cahced/static and on-demand workflows.</p>
    <h3>Web Applications</h3>
    <p>I have experience building full stack, responsive web applications using a variety of tools including NodeJS, Postgres, and Firebase. Let me help you bring your desktop-based workflows to life with the power of the modern web.</p>
  `]
},
 {
  title: "Blog"
 },
 {
  title: "Contact",
  html: [`
   <form>
    <label for="name">Name</label>
    <input type="text" name="name" placeholder="Jane Smith">
    <label for="email">Email</label>
    <input type="email" name="email" placeholder="email@email.com">
    <label for="message">What can I help you with?</label>

<textarea name="message" placeholder="Message" rows="6"></textarea>
<button type="submit">Submit</button>
   </form>
  `]
 }
]

// sections.forEach((s,i) => {
//  document.querySelector(".nav-links").innerHTML += `
//  <a href="#section-${i}">${!(s.title) ? s.name : s.title}</a>
// `
 
//  document.querySelector("main").innerHTML += `
//  <section id="section-${i}" ${(!s.class) ? "" : `class="${s.class}"`}>
//  ${(!s.title) ? "" : `<h2 class="fw6">${s.title}</h2>`}
//  <div>
//   ${(!s.html) ? "" : s.html[0]}
//  </div></section>
// `
// });
/*
document.querySelector("main").children[2].children[1].classList.add("blog")
document.querySelector("main").children[2].children[1].innerHTML +=`
        
        <a rel="prefetch" href="/blog/from-the-ashes-of-shapefiles/">
          <article class="">
            <img src="/assets/img/4x3_ashes.jpg">
            <div>
              <h4> From the Ashes of Shapefiles </h4>
              <h5> A Presentation for the 2020 Virtual Ohio GIS Conference </h5>
              <p> This talk describes the slow and painful migration from a legacy GIS data struct... </p>
            </div>
          </article>
        </a>
        <a rel="prefetch" href="/blog/gis-and-remote-work/">
          <article class="">
            <img src="/assets/img/4x3_home_office.jpg">
            <div>
              <h4> GIS and Remote Work </h4>
              <h5> An Exploration of a GIS Remote Work Toolkit </h5>
              <p> In the aftermath of the Coronavirus pandemic, remote work may well be come the n... </p>
            </div>
          </article>
        </a>
        <a rel="prefetch" href="/blog/exporting-agol-feature-services/" class="">
          <article class="">
            <img src="/assets/img/4x3_agol-cache2.png">
            <div>
              <h4> Exporting AGOL Feature Services to GeoJSON </h4>
              <h5> Using NodeJS and Batches to Transform an ArcGIS Online Feature Service to GeoJSON </h5>
              <p> Recently I had the need to pull data from ArcGIS Online into a Mapbox GL JS web ... </p>
            </div>
          </article>
        </a>
        <a rel="prefetch" href="/blog/ohio-covid-19-dashboard/" class="">
          <article class="">
            <img src="/assets/img/4x3_covid-19.png">
            <div>
              <h4> Ohio COVID-19 Dashboard </h4>
              <h5> A Simple, Client Side Tracking Dashboard for COVID-19 in Ohio </h5>
              <p> Update: This visualization is no longer being updated. There are a wide variety ... </p>
            </div>
          </article>
        </a>
        <a href="/blog" class="text-expanded">View All Posts <img style="transform: rotate(90deg);margin-top:-2px" src="https://icongr.am/clarity/angle-double.svg?size=18&amp;color=049DBF"></a> 
      `    
*/
// window.onload = function() {
//  var images = [...document.querySelectorAll("img")]
//   images.map(function(img) {
//    fetch(img.dataset.src)
//    .then(res => {
//     img.src = img.dataset.src
//    })
//    .catch(err => {
//     console.log(err)
//    })
//   })
// }
var modal = document.getElementsByClassName("modal")[0];

modal.addEventListener("click", function(e) {
 if (!e.target.src) {
  modal.classList.remove("modal-active")
 }
})

// document.addEventListener("click", function(e) {
//  console.log(e.target)

// })


var leftX  = 0,
    topY   = 0;    

document.addEventListener('mousedown', function(e) {
  leftX = e.pageX;
  topY   = e.pageY;
});

document.addEventListener('mouseup', function(e) {
  if (leftX != e.pageX || topY != e.pageY || !e.target.src) {
    return
  }else{
    var img = modal.getElementsByTagName("img")[0];
    img.src = e.target.src.replace("16x9_", "");
    console.log(modal, img)
    modal.classList.add("modal-active")
  }
});
</script>

<script>
/*
 * TouchScroll - using dom overflow:scroll
 * by kmturley https://github.com/kmturley/touch-scroll/blob/master/js/TouchScroll.js
 */

/*globals window, document */

var TouchScroll = function () {
    'use strict';
    
    var module = {
        axis: 'x',
        drag: false,
        zoom: 1,
        time: 0.04,
        ignoreDraggableElements: false,
        isIE: window.navigator.userAgent.toLowerCase().indexOf('msie') > -1,
        isFirefox: window.navigator.userAgent.toLowerCase().indexOf('firefox') > -1,
        /**
         * @method init
         */
        init: function (options) {
            var me = this;
            this.options = options;
            
            // find target element or fall back to body
            if (options && options.id) {
                this.el = document.querySelector(options.id);
            }
            if (!this.el) {
                if (this.isIE || this.isFirefox) {
                    this.el = document.documentElement;
                } else {
                    this.el = document.body;
                }
            }

            // ignore scrolling for draggbles e.g. when img dragable
            if (options && options.ignoreDraggableElements) {
                this.ignoreDraggableElements = true;
              }

            // if draggable option is enabled add events
            if (options.draggable === true) {
                if (this.isIE) {
                    document.ondragstart = function () { return false; };
                }
                if (this.isIE || this.isFirefox) {
                    this.body = document.documentElement;
                } else {
                    this.body = document.body;
                }
                this.addEvent('mousedown', this.el, function (e) { me.onMouseDown(e); });
                this.addEvent('mousemove', this.el, function (e) { me.onMouseMove(e); });
                this.addEvent('mouseup', this.body, function (e) { me.onMouseUp(e); });
            }
            
            // if zoom option exists add mouse wheel functionality to element
            if (options && options.zoom) {
                this.elzoom = document.getElementById(options.zoom);
                if (this.isFirefox) {
                    this.addEvent('DOMMouseScroll', this.el, function (e) { me.onMouseWheel(e); });
                } else {
                    this.addEvent('mousewheel', this.el, function (e) { me.onMouseWheel(e); });
                }
            }
            
            // if scroll options exist add events
            if (options && options.prev) {
                this.prev = document.getElementById(options.prev);
                this.addEvent('mousedown', this.prev, function (e) {
                    me.onMouseDown(e);
                });
                this.addEvent('mouseup', this.prev, function (e) {
                    me.diffx = options.distance ? (-options.distance / 11) : -11;
                    me.onMouseUp(e);
                });
            }
            if (options && options.next) {
                this.next = document.getElementById(options.next);
                this.addEvent('mousedown', this.next, function (e) {
                    me.onMouseDown(e);
                });
                this.addEvent('mouseup', this.next, function (e) {
                    me.diffx = options.distance ? (options.distance / 11) : 11;
                    me.onMouseUp(e);
                });
            }
        },
        /**
         * @method addEvent
         */
        addEvent: function (name, el, func) {
            if (el.addEventListener) {
                el.addEventListener(name, func, false);
            } else if (el.attachEvent) {
                el.attachEvent('on' + name, func);
            } else {
                el[name] = func;
            }
        },
        /**
         * @method cancelEvent
         */
        cancelEvent: function (e) {
            if (!e) { e = window.event; }
            if (e.target && e.target.nodeName === 'IMG') {
                e.preventDefault();
            } else if (e.srcElement && e.srcElement.nodeName === 'IMG') {
                e.returnValue = false;
            }
        },
        /**
         * @method onMouseDown
         */
        onMouseDown: function (e) {
            if( this.ignoreDraggableElements && e.target.draggable ) {
                return;
            } 
            
            if (this.drag === false || this.options.wait === false) {
                // ignore mousedown event if emitted on scrollbar
                this.drag = e.offsetX <= e.target.clientWidth && e.offsetY <= e.target.clientHeight;
                this.cancelEvent(e);
                this.startx = e.clientX + this.el.scrollLeft;
                this.starty = e.clientY + this.el.scrollTop;
                this.diffx = 0;
                this.diffy = 0;
            }
        },
        /**
         * @method onMouseMove
         */
        onMouseMove: function (e) {
            if (this.drag === true) {
                this.cancelEvent(e);
                this.diffx = (this.startx - (e.clientX + this.el.scrollLeft));
                this.diffy = (this.starty - (e.clientY + this.el.scrollTop));
                this.el.scrollLeft += this.diffx;
                this.el.scrollTop += this.diffy;
            }
        },
        /**
         * @method onMouseMove
         */
        onMouseUp: function (e) {
            if (this.drag === true) {
                if (!this.options.wait) {
                    this.drag = null;
                }
                this.cancelEvent(e);
                var me = this,
                    start = 1,
                    animate = function () {
                        var step = Math.sin(start);
                        if (step <= 0) {
                            me.diffx = 0;
                            me.diffy = 0;
                            window.cancelAnimationFrame(animate);
                            me.drag = false;
                        } else {
                            me.el.scrollLeft += me.diffx * step;
                            me.el.scrollTop += me.diffy * step;
                            start -= me.time;
                            window.requestAnimationFrame(animate);
                        }
                    };
                animate();
            }
        },
        /**
         * @method onMouseMove
         */
        onMouseWheel: function (e) {
            this.cancelEvent(e);
            if (e.detail) {
                this.zoom -= e.detail;
            } else {
                this.zoom += (e.wheelDelta / 1200);
            }
            if (this.zoom < 1) {
                this.zoom = 1;
            } else if (this.zoom > 10) {
                this.zoom = 10;
            }
            /*
            this.elzoom.style.OTransform = 'scale(' + this.zoom + ', ' + this.zoom + ')';
            this.elzoom.style.MozTransform = 'scale(' + this.zoom + ', ' + this.zoom + ')';
            this.elzoom.style.msTransform = 'scale(' + this.zoom + ', ' + this.zoom + ')';
            this.elzoom.style.WebkitTransform = 'scale(' + this.zoom + ', ' + this.zoom + ')';
            this.elzoom.style.transform = 'scale(' + this.zoom + ', ' + this.zoom + ')';
            */
            this.elzoom.style.zoom = this.zoom * 100 + '%';
            //this.el.scrollLeft += e.wheelDelta / 10;
            //this.el.scrollTop += e.wheelDelta / 8;
        }
    };
    return module;
};

var viewer = new TouchScroll();
  viewer.init({
      id: '.portfolio',
      draggable: true,
      wait: false
  });

</script>